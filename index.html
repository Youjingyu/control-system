<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Control System</title>
    <link href="css/common.css" rel="stylesheet">
</head>
<body>
    <div class="top clear-fix">
        <div class="log">
            <img src="img/logo.png">
        </div>
        <div class="user-info">
            <div class="user-icon"></div>
            <div class="user-photo">
                <img src="img/user_img.png">
            </div>
            <div class="uer-name">
                <span class="user-title">管理员:</span><span>张主任</span>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="sidebar" id="sidebar">
            <ul class="sidebar-list">
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content train">
                            培训运行监测
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content practice">
                            实训资源监测
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content server">
                            服务保障设施运行监测
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content quality">
                            质量监测
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content analysis">
                            监测分析
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content history">
                            历史数据查询
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content edu">
                            学历教育
                        </div>
                    </div>
                </li>
                <li class="first-menu">
                    <div class="list-item">
                        <div class="list-content system">
                            系统管理
                        </div>
                    </div>
                    <ul class="second-menu hidden">
                        <li>◆&nbsp;&nbsp;二级菜单</li>
                        <li>◆&nbsp;&nbsp;二级菜单</li>
                        <li>◆&nbsp;&nbsp;二级菜单</li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="content">
            <div class="tittle">
                各校区教室机房使用统计
            </div>
            <div class="data-content">
                <div class="data clear-fix">
                    <div class="wenjiang">
                        <div class="data-col">
                            <div class="data1">
                                <div class="data-item data-top">
                                    <div>200</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>600</div>
                                </div>
                            </div>
                            <div class="data2">
                                <div class="data-item data-top">
                                    <div>400</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>300</div>
                                </div>
                            </div>
                            <div class="data3">
                                <div class="data-item data-top">
                                    <div>400</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>100</div>
                                </div>
                            </div>
                        </div>
                        <div class="data-name">温江校区</div>
                    </div>
                    <div class="luojia">
                        <div class="data-col">
                            <div class="data1">
                                <div class="data-item data-top">
                                    <div>200</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>200</div>
                                </div>
                            </div>
                            <div class="data2">
                                <div class="data-item data-top">
                                    <div>150</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>350</div>
                                </div>
                            </div>
                            <div class="data3">
                                <div class="data-item data-top">
                                    <div>450</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>150</div>
                                </div>
                            </div>
                        </div>
                        <div class="data-name">罗家碾校区</div>
                    </div>
                    <div class="caotang">
                        <div class="data-col">
                            <div class="data1">
                                <div class="data-item data-top">
                                    <div>350</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>200</div>
                                </div>
                            </div>
                            <div class="data2">
                                <div class="data-item data-top">
                                    <div>100</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>180</div>
                                </div>
                            </div>
                            <div class="data3">
                                <div class="data-item data-top">
                                    <div>180</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>130</div>
                                </div>
                            </div>
                        </div>
                        <div class="data-name">草堂校区</div>
                    </div>
                    <div class="qingfeng">
                        <div class="data-col">
                            <div class="data1">
                                <div class="data-item data-top">
                                    <div>100</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>100</div>
                                </div>
                            </div>
                            <div class="data2">
                                <div class="data-item data-top">
                                    <div>300</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>450</div>
                                </div>
                            </div>
                            <div class="data3">
                                <div class="data-item data-top">
                                    <div>130</div>
                                </div>
                                <div class="data-item data-bottom">
                                    <div>80</div>
                                </div>
                            </div>
                        </div>
                        <div class="data-name">青风岭校区</div>
                    </div>
                </div>
                <div class="real-data-name">

                </div>
                <div class="data-legend clear-fix">
                    <div class="used-room">
                        在用教室数量
                    </div>
                    <div class="avail-room">
                        可用教室数量
                    </div>
                    <div class="computer-room">
                        在用机房数量
                    </div>
                    <div class="avail-computer-room">
                        可用机房数量
                    </div>
                    <div class="media-room">
                        在用多媒体教室数量
                    </div>
                    <div class="avail-media-room">
                        可用多媒体教室数量
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
    var sidebar_height = document.getElementsByTagName('body')[0].clientHeight - 88;
    var $sidebar = document.getElementById('sidebar')
    $sidebar.setAttribute('style', 'height:' + sidebar_height + 'px');

    function showSecondMenu(e){
        var target = e.target || e.srcElement, cur_li;
        while(!(target.id === 'sidebar')){
            if(target.className === 'first-menu'){
                cur_li = target;
                ulToggle(target);
                break;
            } else {
                target = target.parentNode;
            }
        }
    }

    function  ulToggle(ele){
        var list = document.getElementById('sidebar').getElementsByTagName('ul'),
            cur_ul = ele.getElementsByTagName('ul')[0];
        for(var i = 0, len = list.length; i<len; i++){
            if(cur_ul!==list[i]  && /^[ ]*second-menu[ ]*$/.test(list[i].className)){
                list[i].className = 'second-menu hidden'
            }
        }

        toggle(cur_ul);

        function toggle(toggleUl){
            var className = toggleUl.className;
            if(/^hidden[ ]+|[ ]+hidden$|[ ]+hidden[ ]+]|hidden/.test(className)){
                className = className.replace(/hidden/, '');
            } else {
                className = className + ' hidden'
            }
            toggleUl.setAttribute('class', className);
        }
    }

    if ($sidebar.addEventListener) {                    //所有主流浏览器，除了 IE 8 及更早 IE版本
        $sidebar.addEventListener("click", function(e){
            showSecondMenu(e)
        });
    } else if ($sidebar.attachEvent) {                  // IE 8 及更早 IE 版本
        $sidebar.attachEvent("onclick", function(e){
            showSecondMenu(e)
        });
    }
</script>
</body>
</html>